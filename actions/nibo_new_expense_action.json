{
  "name":"Criar despesas",
  "action_key": "payments",
  "description":"",
  "action_fields":{
    "fields":[
      {
        "key": "Organization",
        "name": { "pt_BR": "Empresa", "en": "Organization" },
        "description": {
          "pt_BR": "Empresa",
          "en": "Organization"
        },
        "label": {
          "pt_BR": "Atribuído",
          "en": "Assignee"
        },
        "required": true,
        "visible": true,
        "advanced": false,
        "not_include_field_in_request" : true,
        "field_type": "dropdown",
        "data_type": "string",
        "list": {
          "type": "remote",
          "helper_method": "nibo_organizations_helper"
        },
        "placeholder": {
          "pt_BR": "Selecione uma empresa",
          "en": "Select an organization"
        }
      },
      {
        "key":"accountId",
        "label":{
          "pt_BR":"Sua conta no Nibo",
          "en":"Your Nibo account"
        },
        "description":{
          "pt_BR":"Conta existente na Nibo no qual será vinculada as entradas",
          "en":"Nibo account that will be relation with the entries"
        },
        "required":true,
        "visible":true,
        "field_type":"dropdown",
        "data_string":"string",
        "list":{
          "type":"remote",
          "helper_method":"nibo_accounts_helper"
        },
        "name":{
          "pt_BR":"Sua conta no Nibo",
          "en":"Your Nibo account"
        },
        "placeholder":{
          "pt_BR":"Selecionar conta",
          "en":"Select account"
        }
      },
      {
        "key":"description",
        "name":{
          "pt_BR":"descrição",
          "en":"description"
        },
        "description":{
          "pt_BR":"Digite algo que te faça lembrar, no extrato da Nibo, que uma determinada saída está associada a esta automatização.",
          "en":"Type something that makes you remember on Nibo, that a determined expense is associated to this automation."
        },
        "required":true,
        "default_value":"",
        "visible":true,
        "max":20,
        "field_type":"custom_textarea",
        "data_type":"string",
        "placeholder":{
          "pt_BR":"",
          "en":""
        },
        "label":{
          "pt_BR":"",
          "en":""
        }
      },
      {
        "key":"value",
        "name":{
          "pt_BR":"Valor da entrada",
          "en":"Entry value"
        },
        "description":{
          "pt_BR":"Valor que será incluído na sua conta do Nibo.",
          "en":"Value that will be included in your account on Nibo."
        },
        "required":true,
        "default_value":0,
        "visible":true,
        "advanced":true,
        "field_type":"custom_decimal",
        "data_type":"decimal",
        "placeholder":{
          "pt_BR":"",
          "en":""
        },
        "label":{
          "pt_BR":"",
          "en":""
        }
      },
      {
        "key": "suppliers_name",
        "name": {"pt_BR": "nome do fornecedor", "en": "suppliers name"},
        "description": {
          "pt_BR": "Nome do fornecedor.",
          "en": "suppliers name."
        },
        "required": false,
        "visible": true,
        "advanced": false,
        "field_type": "custom",
        "data_type": "string",
        "not_include_field_in_request": true
      },
       {
        "key": "suppliers_email",
        "name": {"pt_BR": "e-mail do fornecedor", "en": "suppliers e-mail"},
        "description": {
          "pt_BR": "E-mail do fornecedor.",
          "en": "Suppliers e-mail."
        },
        "required": false,
        "visible": true,
        "advanced": false,
        "field_type": "custom",
        "data_type": "string",
        "not_include_field_in_request": true
      },
       {
        "key": "suppliers_doc",
        "name": {"pt_BR": "documento do fornecedor", "en": "suppliers doc"},
        "description": {
          "pt_BR": "Documento do fornecedor.",
          "en": "Suppliers doc."
        },
        "required": false,
        "visible": true,
        "advanced": false,
        "field_type": "custom",
        "data_type": "string",
        "not_include_field_in_request": true
      },
      {
        "key":"date",
        "name":{
          "pt_BR":"Data da entrada",
          "en":"Entry date"
        },
        "description":{
          "pt_BR":"Data em que o pagamento foi aprovado.",
          "en":"Date which payment was approved."
        },
        "required":true,
        "visible":true,
        "advanced":true,
        "field_type":"custom",
        "data_type":"string",
        "placeholder":{
          "pt_BR":"",
          "en":""
        },
        "label":{
          "pt_BR":"",
          "en":""
        }
      },
      {
        "key": "categoryId",
        "name": {
          "pt_BR": "Categoria",
          "en": "Category"
        },
        "description": {
          "pt_BR": "Categorias na Nibo.",
          "en": "Categories of Nibo."
        },
        "required": false,
        "visible": true,
        "advanced": true,
        "field_type": "dropdown",
        "data_type": "string",
        "list": {
          "type": "remote",
          "helper_method": "nibo_categories_helper"
        },
        "placeholder": {
          "pt_BR": "Selecione uma categoria",
          "en": "Select a category"
        },
        "label": {
          "pt_BR": "",
          "en": ""
        }
      },
      {
        "key": "costCenterId",
        "name": {
          "pt_BR": "Centros de Custo",
          "en": "Cost centers"
        },
        "description": {
          "pt_BR": "Centros de custo na Nibo.",
          "en": "Cost centers of Nibo."
        },
        "required": false,
        "visible": true,
        "advanced": true,
        "field_type": "dropdown",
        "data_type": "string",
        "list": {
          "type": "remote",
          "helper_method": "nibo_cost_centers_helper"
        },
        "placeholder": {
          "pt_BR": "Selecione um centro de custo",
          "en": "Select a cost center"
        },
        "label": {
          "pt_BR": "",
          "en": ""
        }
      }
    ]
  },
  "request": {
  	"method_name": "/suppliers",
    "json_api": true,
    "error_fields": ["error", "description"],
    "pre_hooks": {
      "hooks": [
        {
          "name": "Buscar fornecedor",
          "request": {
            "verb": "get",
            "method_name": "/suppliers",
            "params": [
              {"field": "$filter", "value": "document/number eq '{suppliers_doc}' or email eq '{suppliers_email}'", "type": "string"}
            ]
          }
        },
        {
          "name": "Criar fornecedor",
          "conditions": [[
            {"field": "id", "condition": "equal", "value": null}
          ]],
          "request": {
            "verb": "post",
            "method_name": "/suppliers",
            "params": [
              {"field": "email", "value": "{suppliers_email}"},
              {"field": "nome", "value": "{suppliers_name}"}
            ]
          }
        }
      ],
      "append_fields": [
        {"field": "stakeholderId", "value": "{id}", "type": "string"}
      ]
    }
  }
}
